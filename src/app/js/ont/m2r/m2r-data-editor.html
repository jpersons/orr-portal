<span style="color: gray">

  This interface consists of three main sections:
  <i>Mapped ontologies</i>,
  <i>Term and relationship selection</i>,
  and
  <i>Defined mappings</i>.
  Use the Add button in the first section to load the ontologies
  from which you want to select the terms to be mapped. You can load as
  many ontologies as needed.
  Once one or more ontologies are loaded, select which ones to load on each side
  of the second section. The left- and right-hand sides will respectively contain
  potential "subjects" and "objects" for the needed mappings. All terms from the selected
  ontologies will be displayed and you can use the filters to search/narrow down the
  list of displayed elements. Select the subjects and objects to be mapped
  together and then click the button in the middle with the desired semantic relation
  (<i>predicate</i>).
  Once this is clicked, the corresponding triples
  (i.e., <i>subject</i>–<i>predicate</i>–<i>object</i>),
  will be added to the table in the <i>Defined mappings</i> section.
</span>

<div style="background-color: #cfe3e6; width: 100%; text-align: center">
  <label>
  Mapped ontologies
  </label>

  <span uib-dropdown>
    <a href id="add-mapped-ont-dropdown" uib-dropdown-toggle
       class="btn btn-default btn-xs"
    >
      Add <i class="caret"></i>
    </a>
    <ul class="dropdown-menu m2rUriSelect" aria-labelledby="add-mapped-ont-dropdown">
      <li ng-repeat="ont in vm.selectableOnts">
        <a href class="uriTextSimple"
           uib-popover="{{ont.name}}" popover-trigger="mouseenter"
           popover-placement="bottom"
           ng-click="selectMappedOntology(ont)">{{ont.uri}}</a>
      </li>
      <li class="divider"></li>
      <li>
        <a href
           uib-popover="Click to enter URL of desired ontology" popover-trigger="mouseenter"
           popover-placement="bottom"
           ng-click="enterExternalOntologyUri()">External ontology&hellip;</a>
      </li>
      <li class="divider"></li>
    </ul>
  </span>
</div>

<div style="width: 100%">
  <table style="width: 100px; margin-left: auto; margin-right: auto">
    <tbody>
    <tr ng-if="vm.mappedOntsInfo.length===0">
      <td style="text-align: center;color:lightgrey;font-style: italic">
        None
      </td>
    </tr>
    <tr ng-repeat="moi in vm.mappedOntsInfo" style="white-space: nowrap">
      <td>
        <span ng-if="moi.loading">
          <i class="fa fa-spinner fa-spin" aria-hidden="true"></i>
        </span>
        {{$index + 1}}-
        <span ng-bind-html="moi.uri | mklinksOnlyExternal"></span>
        <span ng-if="moi.name">
          - {{moi.name}}
<!--
          <span ng-if="moi.version" style="color: #b3b3b3; font-size: x-small; font-weight: 200">
            {{moi.version}}
          </span>
-->
        </span>
        <span ng-if="moi.error"
              style="color: #e0919a; font-size: small; font-weight: 200; font-style: italic">
          &nbsp;{{moi.error}}
        </span>
      </td>
    </tr>
    </tbody>
  </table>
</div>

<div style="background-color: #cfe3e6; width: 100%; text-align: center">
  <label>
    Term and relationship selection
  </label>
</div>

<table style="width: 100%" class="table">

  <tbody>
  <tr>
    <td style="width: 50%">

      <m2r-data-editor-mapping-side side="'left'"
                                    mapped-onts-info="vm.mappedOntsInfo"
                                    selected-rows="vm.selectedRowsLeft"
      ></m2r-data-editor-mapping-side>

    </td>

    <td style="width: 30px; vertical-align: middle">
      <table>
        <tbody>
        <tr style="height: 70px">
          <td style="text-align: center; vertical-align: top">
            <div uib-popover="Select entities on both sides and then choose the
              relationship below that you want to establish between those entities"
                 popover-trigger="mouseenter"
                 style="margin-bottom: 40px"
            >
              <i class="fa fa-question-circle fa-lg" aria-hidden="true" style="color: gray"></i>
            </div>
          </td>
        </tr>
        <tr ng-repeat="(relUri, rel) in relations">
          <td uib-popover="{{rel.prop.prefix + ':' + rel.prop.label + ' - ' +rel.prop.tooltip}}"
              popover-trigger="mouseenter"
              style="text-align: center"
          >
            <div class="btn btn-primary btn-xs"
                 style="margin-bottom: 7px"
                 ng-bind-html="rel.prop.localName"
                 ng-disabled="noSelectedPairs()"
                 ng-click="relButtonClicked(rel)"
            ></div>
          </td>
        </tr>
        </tbody>
      </table>

    </td>

    <td style="width: 50%">

      <m2r-data-editor-mapping-side side="'right'"
                                    mapped-onts-info="vm.mappedOntsInfo"
                                    selected-rows="vm.selectedRowsRight"
      ></m2r-data-editor-mapping-side>

    </td>
  </tr>
  </tbody>

</table>

<div style="background-color: #cfe3e6; width: 100%; text-align: center">
  <label>
    Defined mappings
  </label>
  <span style="color: gray">
    ({{gridOptions.data.length}})
  </span>
</div>

<div class="ontGrid" ui-grid="gridOptions"></div>

<div ng-if="debug" >
  <pre class="debug" ng-bind="'ontData = ' +(ontData | json)"></pre>
  <pre class="debug" ng-bind="'vm = ' +(vm | json)"></pre>
</div>
