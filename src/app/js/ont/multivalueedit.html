<div>
  <form editable-form name="attrTableform"
        onaftersave="applyCellChanges()"
        oncancel="cancelCell(em)"
        ng-class="{'cell-editing': attrTableform.$visible}"
        tabindex="0"
        ng-keyup="cellKeyUp($event, attrTableform)"
  >

    <table class="table table-condensed"
           ng-class="{'table-hover': !attrTableform.$visible, 'transparent': attrTableform.$visible}"
           ng-click="enterCellEditing(attrTableform)"
           uib-tooltip="{{!attrTableform.$visible && !disableEditIf ? 'Click to edit the value(s) for this property' : ''}}"
    >
      <tr ng-repeat="valueEntry in em | filter:filterValue track by $index">
        <td ng-show="attrTableform.$visible" style="width: 10px">
          <div ng-if="propValueSelection"
               type="button" ng-click="selectValue(em, valueEntry.id)"
               class="btn btn-info btn-xs pull-right" style="margin-bottom: 4px"
               uib-tooltip="Select value"
               tooltip-placement="right"
          >
            <i class="fa fa-ellipsis-h" aria-hidden="true"></i>
          </div>

          <div type="button" ng-click="deleteValue(em, valueEntry.id)"
               class="btn btn-danger btn-xs pull-right"
               uib-tooltip="Remove this value"
               tooltip-placement="left"
          >
            <i class="fa fa-times" aria-hidden="true"></i>
          </div>
        </td>
        <td>
          <span editable-textarea="valueEntry.value"
                e-rows="2"
                e-form="attrTableform"
                ng-bind="valueEntry.value || '-'"
                e-ng-keyup="cellTextAreaKeyUp($event, attrTableform, em)"
          >
          </span>
          <!--<pre ng-bind="'valueEntry=' +(valueEntry|json)"></pre>-->
        </td>
      </tr>
    </table>

    <span ng-show="attrTableform.$visible">
        <div type="button" ng-disabled="attrTableform.$waiting"
             ng-click="addValue(em)"
             class="btn btn-default btn-xs"
             uib-tooltip="Add other value for this property (Ctrl-Shift-+)"
             tooltip-placement="bottom"
        >
          <i class="fa fa-plus" aria-hidden="true"></i> Add value
        </div>

        <div type="submit" ng-disabled="attrTableform.$waiting"
             class="btn btn-default btn-xs"
             uib-tooltip="Apply all changes in this cell (Ctrl-Shift-Enter)"
             tooltip-placement="bottom"
        >
          <i class="fa fa-check" aria-hidden="true"></i> Apply
        </div>

        <div type="button" ng-disabled="attrTableform.$waiting"
             class="btn btn-default btn-xs"
             ng-click="attrTableform.$cancel()"
             uib-tooltip="Cancel all changes to this cell (Esc)"
             tooltip-placement="bottom"
        >
          Cancel
        </div>
    </span>

  </form>
</div>

